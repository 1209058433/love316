"use strict";var e=require("../../common/vendor.js");const t={data:()=>({week:0,single:"",ifSchool:!0,ifChangeStartDate:!1,ifLogin:!0}),created(){this.getSchoolStartDate(),this.ifLog()},methods:{toggle(){this.ifChangeStartDate=!this.ifChangeStartDate},async getSchoolStartDate(){const t=e.pn.database(),{result:o}=await t.collection("schoolWeek").where({id:1}).get();this.single=o.data[0].goSchoolDate;const i=+new Date(this.single),n=e.hooks().format("YYYY-MM-DD"),a=+new Date(n),s=Math.floor((a-i)/1e3/60/60/24/7)+1;s>16?this.ifSchool=!1:this.week=s},ifLog(){e.index.getStorageSync("userAccount")&&(this.ifLogin=!1)}},watch:{async single(t,o){if(""!==o){const o=e.pn.database();await o.collection("schoolWeek").where({id:1}).update({goSchoolDate:t}),this.getSchoolStartDate(),e.index.showToast({icon:"success",title:"更新成功",duration:2e3})}}}};if(!Array){(e.resolveComponent("uni-section")+e.resolveComponent("uni-datetime-picker")+e.resolveComponent("my-curriculum"))()}Math||((()=>"../../uni_modules/uni-section/components/uni-section/uni-section.js")+(()=>"../../uni_modules/uni-datetime-picker/components/uni-datetime-picker/uni-datetime-picker.js")+(()=>"../../components/my-curriculum/my-curriculum.js"))();var o=e._export_sfc(t,[["render",function(t,o,i,n,a,s){return e.e({a:e.p({title:"开学时间："+a.single,type:"line"}),b:a.ifChangeStartDate},a.ifChangeStartDate?{c:e.o((e=>a.single=e)),d:e.p({type:"date","clear-icon":!1,modelValue:a.single})}:{},{e:a.ifSchool},a.ifSchool?{f:e.t(a.week)}:{},{g:e.o(((...e)=>s.toggle&&s.toggle(...e))),h:a.ifLogin,i:e.p({ifLogin:a.ifLogin})})}]]);wx.createPage(o);
