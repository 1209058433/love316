"use strict";var e=require("../../common/vendor.js");const s={data:()=>({userAccount:"",userPassword:"",ifLoging:!1}),methods:{async login(){if(""!==this.userAccount&&""!==this.userPassword){this.ifLoging=!0;const s=e.pn.database(),{result:o}=await s.collection("users").where({account:this.userAccount}).get();o.data[0]?o.data[0].password===this.userPassword?(e.index.setStorageSync("userAccount",o.data[0].account),e.index.showModal({title:"哟西",content:"登录成功",showCancel:!1,success(){e.index.reLaunch({url:"/pages/myself/myself"})}})):(e.index.showModal({title:"登陆失败",content:"密码错误",showCancel:!1}),this.ifLoging=!1):(e.index.showModal({title:"登陆失败",content:"账号错误",showCancel:!1}),this.ifLoging=!1)}else e.index.showModal({title:"笨比",content:"账号和密码不能为空",showCancel:!1})},goBackUrl(){e.index.navigateBack()}}};var o=e._export_sfc(s,[["render",function(s,o,t,n,a,c){return e.e({a:a.userAccount,b:e.o((e=>a.userAccount=e.detail.value)),c:a.userPassword,d:e.o((e=>a.userPassword=e.detail.value)),e:a.ifLoging},a.ifLoging?{}:{f:e.o(((...e)=>c.login&&c.login(...e)))},{g:e.o(((...e)=>c.goBackUrl&&c.goBackUrl(...e)))})}]]);wx.createPage(o);
